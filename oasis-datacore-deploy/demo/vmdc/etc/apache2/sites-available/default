<VirtualHost *:80>
   # Redirect to https.
   # Else Cross-Origin Error in Swagger
   RewriteEngine On
   RewriteCond %{SERVER_PORT} ^80$
   RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R,L]
</VirtualHost>

<VirtualHost *:443>
   ###########################################
   # [OASIS] proxying to the tomcat7-dc
   # turning on host preservation (auto in ajp but required in http proxy)
   ProxyPreserveHost on

   <Proxy http://localhost:8080>
      ProxySet timeout=300 retry=5
      # allowing is required (by default the latest apache denies all)
      Order allow,deny
      allow from all
   </Proxy>

   # (reverse) proxy ; NB. ending slash required,
   # else builds URLs like http://localhost:8080dc
   ProxyPass / http://localhost:8080/
   ProxyPassReverse / http://localhost:8080/
   # [OASIS] end
   ###########################################

   # Certificate - SSL Configuration
   SSLEngine On
   SSLCertificateKeyFile /etc/ssl/private/ozwillo-preprod.key
   SSLCertificateFile /etc/ssl/private/ozwillo-preprod-cert.pem

   # Based on https://wiki.mozilla.org/Security/Server_Side_TLS - consider as global configuration
   SSLProtocol all -SSLv2
   SSLCipherSuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-$
   SSLHonorCipherOrder on
   SSLCompression off
</VirtualHost>
